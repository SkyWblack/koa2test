(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c8d3908"],{4600:function(t,e,n){"use strict";n.r(e);var i=n("19a3"),a=n("9426"),o=n("c48b"),s={name:"TakePhotos",mixins:[a["a"]],components:{Toast:i["a"]},data:function(){return{lock:!0,toastShow:!1,toastType:"success",toastText:"提交成功",imgListReq:[],imgListtTake:[]}},created:function(){var t=this;this.reqPreImg(),window.getReselt=function(e){t.imgListtTake.push(e)}},computed:{length:function(){var t=this.imgListReq.length+this.imgListtTake.length;return t}},methods:{takePhoto:function(){o["a"]?window.webkit.messageHandlers.showCamera.postMessage("camera"):AndroidWebView.showCamera("camera")},deleteImg:function(t,e){var n=this;if(1===e){var i=this.imgListReq[t].imgUrl,a=this.imgListReq[t].imgId;this.$http.get("/currentList/deleteImg",{id:a,fileName:i}).then(function(e){"success"===e.code&&n.imgListReq.splice(t,1)})}else 2===e&&this.imgListtTake.splice(t,1)},reqPreImg:function(){var t=this,e=this.$route.query.id;this.$http.get("/currentList/getImg",{mtId:e}).then(function(e){var n=e.data;n.length>0&&(t.imgListReq=n)})},submit:function(){var t=this;if(!this.lock)return!1;this.lock=!1;var e=[],n={};if(this.imgListReq.length>0)for(var i=0,a=this.imgListReq.length;i<a;i++)n={},n.id=this.imgListReq[i].imgId,n.img=this.imgListReq[i].imgUrl,e.push(n);if(this.imgListtTake.length>0)for(var o=0,s=this.imgListtTake.length;o<s;o++)n={},n.id="",n.img=this.imgListtTake[o],e.push(n);this.$http.post("/currentList/photoSubmit",{id:this.$route.query.id,userid:this.$store.state.userData.userid,imgs:e}).then(function(e){t.lock=!0;var n=t;"success"===e.code?(n.toastType="success",n.toastShow=!0,setTimeout(function(){n.$router.back()},500)):(n.toastText="提交失败,请稍后重试",n.toastType="warn",n.toastShow=!0)})}}},r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container  takePhotos"},[n("div",{staticClass:"back",on:{click:t.back}}),t._v(" "),n("Header",{ref:"header",attrs:{title:"拍照"}}),t._v(" "),n("div",{staticClass:"tip"},[t._v("图片上传不能超过5张哦！")]),t._v(" "),n("div",{staticClass:"preImg"},[t._l(t.imgListReq,function(e,i){return n("span",{key:i,staticClass:"img"},[n("img",{attrs:{src:e.baseUrl+"meeting/"+e.imgUrl,alt:""}}),n("span",{staticClass:"point",on:{click:function(e){t.deleteImg(i,1)}}})])}),t._v(" "),t._l(t.imgListtTake,function(e,i){return n("span",{key:i,staticClass:"img"},[n("img",{attrs:{src:e,alt:""}}),n("span",{staticClass:"point",on:{click:function(e){t.deleteImg(i,2)}}})])}),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.length<5,expression:"length < 5"}],staticClass:"carema",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.takePhoto(e)}}})],2),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.length>=1,expression:"length >= 1"}],staticClass:"submit",on:{click:t.submit}},[t._v("提交")]),t._v(" "),n("toast",{attrs:{type:t.toastType,text:t.toastText},model:{value:t.toastShow,callback:function(e){t.toastShow=e},expression:"toastShow"}})],1)},c=[],m=n("2455");function d(t){n("d5fc")}var f=!1,l=d,g="data-v-0adcf72f",h=null,u=Object(m["a"])(s,r,c,f,l,g,h);e["default"]=u.exports},4917:function(t,e,n){n("214f")("match",1,function(t,e,n){return[function(n){"use strict";var i=t(this),a=void 0==n?void 0:n[e];return void 0!==a?a.call(n,i):new RegExp(n)[e](String(i))},n]})},7278:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,"\n.takePhotos[data-v-0adcf72f] {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  position: relative;\n}\n.takePhotos .tip[data-v-0adcf72f] {\n  height: 1rem;\n  width: 100%;\n  line-height: 1rem;\n  color: red;\n  font-size: 0.37333rem;\n  text-align: center;\n  margin-top: 1rem;\n}\n.takePhotos .preImg[data-v-0adcf72f] {\n  width: 100%;\n  padding: 0 0.2rem;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.takePhotos .preImg .img[data-v-0adcf72f] {\n  display: inline-block;\n  width: 2.66667rem;\n  height: 2.66667rem;\n  margin: 0.26667rem 0.26667rem;\n  position: relative;\n  float: left;\n}\n.takePhotos .preImg .img img[data-v-0adcf72f] {\n  width: 100%;\n  height: 100%;\n}\n.takePhotos .preImg .img .point[data-v-0adcf72f] {\n  display: inline-block;\n  width: 0.6rem;\n  height: 0.6rem;\n  overflow: hidden;\n  position: absolute;\n  right: -0.2rem;\n  top: -0.2rem;\n  background-color: red;\n  opacity: 0.7;\n  border-radius: 50%;\n}\n.takePhotos .preImg .img .point[data-v-0adcf72f]::after,\n.takePhotos .preImg .img .point[data-v-0adcf72f]::before {\n  position: absolute;\n  content: '';\n  top: 50%;\n  left: 0;\n  margin-top: -0.01333rem;\n  background-color: #fff;\n  width: 100%;\n  height: 0.05333rem;\n}\n.takePhotos .preImg .img .point[data-v-0adcf72f]::before {\n  -webkit-transform: rotate(45deg);\n          transform: rotate(45deg);\n}\n.takePhotos .preImg .img .point[data-v-0adcf72f]::after {\n  -webkit-transform: rotate(-45deg);\n          transform: rotate(-45deg);\n}\n.takePhotos .preImg .carema[data-v-0adcf72f] {\n  float: left;\n  background-color: #e2e2e2;\n  display: inline-block;\n  width: 2.66667rem;\n  height: 2.66667rem;\n  margin: 0.26667rem 0.26667rem;\n  overflow: hidden;\n  position: relative;\n}\n.takePhotos .preImg .carema[data-v-0adcf72f]::after {\n  content: ' ';\n  display: inline-block;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 0.8rem;\n  height: 0.06667rem;\n  background-color: #afafaf;\n  -webkit-transform-origin: 0 100%;\n  transform-origin: 0 100%;\n  -webkit-transform: translate(-50%, -50%);\n  transform: translate(-50%, -50%);\n  z-index: 999;\n}\n.takePhotos .preImg .carema[data-v-0adcf72f]::before {\n  content: ' ';\n  display: inline-block;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 0.06667rem;\n  height: 0.8rem;\n  background-color: #afafaf;\n  -webkit-transform-origin: 0 100%;\n  transform-origin: 0 100%;\n  -webkit-transform: translate(-50%, -50%);\n  transform: translate(-50%, -50%);\n  z-index: 999;\n}\n.takePhotos .submit[data-v-0adcf72f] {\n  position: fixed;\n  bottom: 0;\n  width: 100%;\n  height: 1.2rem;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  font-size: 0.4rem;\n  background-color: #1754bc;\n  color: #fff;\n}\n",""])},c48b:function(t,e,n){"use strict";n.d(e,"a",function(){return i});n("4917"),n("cadf"),n("551c"),n("097d"),navigator.userAgent.indexOf("Android")>-1||navigator.userAgent.indexOf("Adr");var i=!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)},d5fc:function(t,e,n){var i=n("7278");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("499e").default;a("6d0f7eee",i,!0,{})}}]);